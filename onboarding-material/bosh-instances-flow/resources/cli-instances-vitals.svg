<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="792px" height="951px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.162 Safari/537.36&quot; version=&quot;8.4.7&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;1a1225f7-81ae-9211-dd13-7075ddbdab0d&quot; name=&quot;Page-1&quot;&gt;3Vxbc6M4Fv41rtp9cAoQF/vRSad7dqtntqvSO7v71CWDbLMB5AGRy/761RWQhB0CJPF0qjuxj0GX73znIungBbjJn76U8Hj4FScoW3hO8rQAnxae5/rRmv5hkmchicJACPZlmsiLWsFd+j8khY6U1mmCKu1CgnFG0qMujHFRoJhoMliW+FG/bIczvdcj3CNLcBfDzJb+K03IQUhXXtTKf0Hp/qB6dkM54S2M7/clrgvZ38IDO/4jPs6haktOtDrABD92ROB2AW5KjIl4lT/doIxhq2AT930+8Wkz7hIVZMgNUi0PMKuRGjEfF3lWWPDZIHa9swDXj4eUoLsjjNmnj1T7VHYgeUbfufRlRUp8j25whkt+N3D4D/1kl2ZZRy5RAdf2iOUkHlBJ0FNHJGfwBeEckfKZXiI/9VYSTcm2tXz72Kou8KXs0FEbCKTWoKTLvmm6hYy+kKj1IxhZCN58/dtbgTgDWMDVsPICGyzX6wHLVbY5BSzVRget63/c/UIlv/9qYUYnRM4BU+ACGcSSIpil+4K+jSlMiMqvGTwpNe+N/CBPk4R106sJXVdvwE/XsTGPQhtybw7EbQv/lJbUZ1K8vDBjAG/Zqz1p5tpLW/ejaev5OoZ+D29BH4jRHCjaVv7JRos68yN7mUACKwrwKYK9F2aBY/AO2JiFPaYezoHYykLMDi2oSDYsWjNTzWBVpbGODp16+fxvZohXDiWyFPyHC1x/pQTfUJnSATJL5yaLnlLC7nKvHMeV78VNTgTke/Oek3BXuC5jpPl6Ass9UldJ+0KJllHYOukGox7MlaxEGSTpg56H9ClC9vANp3TAjcpd39Pdewj0JsR05F3dxMBoyHd17gBvpTckQLAaovqEz53LjuyCymJOA8wwMq0tMoHXk0mxQmOEFxg8czydZ2B9kmc/CWf84AVVD+WMazQUroz86gRnRjDCsxOJYDQjnKv1eq2xIgCeTgvN+bhTfIhSvkaI6KII4RpxIwKGHt+aEG/iRJr42VImmkAZx/M0yrgO6FLGNbzIFMqEq4unTKDijNR0sAJXwTjSBEa27L+hF/EsSoTjKaHRIdLjis6GYJKzGBo9JJ5Llvaom1Ra0LNC/hP4EytS+UZ282p/0t8PCI1+HG0Xhb4QLfbfvTRWKgZeeLer0FTmgrk3bk7Scfhyw1/rWrY5tvJtjjXkmLLaUAu/Dhyuhcdw3y6SQmnLxkIEeFqCyKzL9SdliKDHyC/Lu7uOvmnkmyvE4QmB0ZC5qTSfbw/sNYM/gRJmhgjC8IWFgx+Ep2jxEy9AG9yV6wQjqRKYC1BgjGU+qoQ9eSBF806+xSU54D0uYHbbSo1dwhfzgZfSgf8iQp7lQQisCaaitt+vGB9f8tNa2uD08MQZyJPBBBjqnEN7K+gaVwdGSVzeUwP4M+1DhkYK4gJfJbov7UQ2q6FJxw2gJ/AL/HCmgRb+UbNTpOsdLsiy4sza0Atc//hE/3A0nCwt0FKNkX/Kxhi0N7caEX1kqSlhzdMbdzDWu72hfEyZcp3f0OPpBretgLpnZyuIkRYVgUWMaI7mLJcPKYFZ1UcTIaGYbXtkYmSW2J5CK/ly+51ho08tbpjUToJyKgzj2J7XgRB2RrlhCmX/QpgzeoqR08ktH/Llsd5mabxMj83HYjhg4wX0h96XFjt8dr4XMLe6YrFrc6Rhk9pxsvCdDMcwO+CKyJlQG/icoGOGn3PE8+2zw++d57kJ7dgRhoNgzBjT9iOI/NGztZTffrQsYI4M1TOVK8oDCk+ZQ+Y1djUz/nlhi0sECe3f+Tve8vmBze/5HREyWCTC/KhDZC/4r4KGI345/f1HjWo0uu8SJfzwicUmPIuWaIcEVveVhTeTLqnXNHCeF8tjGt/TEdfHE3DuSpxPBu3u9uvtzXfDKwrys+NOjfsjLEe1yprbMQrQ/3sa/4seq4pxEdclD5+KK9VzER9KXOCaDQs9obgmKS5Uaz1+flLcgHva+Y84S+mfK5rc/KgY1H/568u+sS9EnAOJ98RjZEVQ0WL+2+Y7e5OjqqKXVDZ/J4fCZlqvCnCKbElzvCs1lKTVEZL4wMeaNrZHDohrlKqzOuIiSYs9uyUW2nsVRNRiM9pnxfMPyP/KwXAnuRDH+4owdNFVif7ZFaxiRg2JQns3sGteZOEcacdVM5fuzAnPZPd1BkvhwlD5wJMIqUXmHuRw66oTMqS3KLbV0Sbrm3qmz7gmx5q+/kye+TEyetAtekTMt3Chvj9pAZvbOPmIf8h5vMYgGbJ1XjR5rXQeYpR08CzisgSbHBppzigtONsAqlgnrpDo07/bDA0ETK1InMeSrjFapBTTKz1Ocqqr9FQFyrfBllppnU0EtwPqGHCwiBKiAWGABSZpLHHiNte2zgCpeO/5MUMEMcDgjvAZMrvlurtRLomGSDr7qjHDCWZnmvBEMxTAv4sdzhVATnFlQBC5FEPsYKUChohTFTKChsgFxlBYslQEBKinO5K8iciwhLkrFAQfnANkV2wRz5ToaBFNmpIOpWkYr2T4zeAz53/HP/AFxblBMypmrdDYEZleHJehHWvBLI0jbKvpferigL6VEvScGER99Un+LBspc5+gGLjOgE/ghDpArg1QU1s4+5lKZJ+pyG27HBY0HjI+/8xVm0PQ762UnaNsM7L3TJVfSNKHRd8+HwN+KTHkazUB48loQRcFhZIZiXf3o46Y96xL32IwcmXFfGtdvXJUU/aNLf7NsV1sniQPLbeeowZzZe8Vb0Qee3EwBSvd1gB4R5h8C6aVBdHgUlWj8EedJLOP2FmxEy20qqHVz14ZFPrGgYlZjz34QDAyGgqGVaSOOBBc2bnBejwjjOrBboVyyw9VaTBa7SpiXIralVWpiqPV2HIwgz+emdu8Zw3hqqfOhA6H/mNrJ3dEzckLJaY2SQb7BuX9L5gkkae7fW89kiSRsZQAZlx4V5LYD4u49tpicLk6jRm+FjNC35sSMy4rPPiGVx/tJ4CnlzgC9dDAh1DATt/dCdVHC7OSZHSUuLDkwCwQB56htMHaB4b21QMiH6J9u/TMff3TCSd1fKm6A6MtNzQa+kDdqWeHu7ob8ZhAsxpQ3rtdEayd9eJMXWBPKXk0yd/31ZBfmhcwjDcIx3oBT2/I/8A0YG0/b+KOf7qAEQlotABhpCeQcm3ZYVp4lmmD2TQggPRR7sNSCmPPxfPHLj2MrNL9yKxy7dl0mrBN0X1CxV5whFFoLDnmLFkGl1Wy7KpbzK9EeHV1u9GQGw0rWX4bvti7Wu6Ih2bPlCyfLo73ovOPSFrOY/Qzkx/mYwI9Z/HMBxkG+xjjlGGojxnDCHtX65/8ENLghPoagzrPNvwItj2J+Qq3KPuGq5QXCYFPW0wIztkJK/vguvnym74veuk/aOxwDdeE1SPfNN/p0xLG2knuoczJzeVIR3hll2uDHqKM2Fmmb9tv7hEKar8eCdz+Hw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(0.5,0.5)"><rect x="250" y="20" width="540" height="359" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1" y="180" width="120" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(51.5,228.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="19" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 19px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">CLI</div></div></foreignObject><text x="10" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">CLI</text></switch></g><g transform="translate(259.5,33.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 56px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">BOSH VM</div></div></foreignObject><text x="28" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">BOSH VM</text></switch></g><rect x="294" y="70" width="136" height="270" rx="20.4" ry="20.4" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(339.5,198.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="43" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 43px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Director<br /></div></div></foreignObject><text x="22" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Director&lt;br&gt;</text></switch></g><path d="M 470 68 C 470 57.33 530 57.33 530 68 L 530 112 C 530 122.67 470 122.67 470 112 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 470 68 C 470 76 530 76 530 68 M 470 72 C 470 80 530 80 530 72 M 470 76 C 470 84 530 84 530 76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(491.5,96.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="17" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 17px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">DB</div></div></foreignObject><text x="9" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">DB</text></switch></g><path d="M 121 187.86 L 290.18 112.59" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 294.98 110.45 L 290.01 116.5 L 290.18 112.59 L 287.16 110.1 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(204.5,142.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">2</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">2</text></switch></g><path d="M 121 207.86 L 288.3 178.25" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 293.47 177.34 L 287.19 182 L 288.3 178.25 L 285.97 175.11 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(204.5,186.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">3</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">3</text></switch></g><path d="M 429.57 213.57 L 496.45 125.08" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 499.61 120.89 L 498.18 128.59 L 496.45 125.08 L 492.6 124.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(461.5,160.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">5</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">5</text></switch></g><path d="M 623.14 80 L 536.65 78" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 531.4 77.88 L 538.48 74.55 L 536.65 78 L 538.32 81.54 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(573.5,72.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">7</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">7</text></switch></g><path d="M 293.86 272.86 L 323.55 237.64 Q 330 230 321.78 224.31 L 299.09 208.62" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 294.78 205.64 L 302.52 206.74 L 299.09 208.62 L 298.54 212.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(300.5,229.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">6</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">6</text></switch></g><rect x="19" y="0" width="84" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 40.29 100 L 39.63 172.2" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 39.58 177.45 L 36.15 170.42 L 39.63 172.2 L 43.15 170.49 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(36.5,133.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">1</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">1</text></switch></g><path d="M 121 220 L 288.28 193.84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 293.47 193.03 L 287.09 197.57 L 288.28 193.84 L 286.01 190.65 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(204.5,200.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">4</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">4</text></switch></g><path d="M 250.29 40 L 250.29 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 250.29 40 L 250.29 40 L 250.29 40 L 250.29 40 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="620" y="64.5" width="136" height="150" rx="20.4" ry="20.4" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(654.5,133.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="67" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 67px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Bosh worker<br /></div></div></foreignObject><text x="34" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Bosh worker&lt;br&gt;</text></switch></g><g transform="translate(1.5,506.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="758" height="431" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 758px; white-space: normal; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><ol style="font-size: 14px ; line-height: 150%"><li><font face="Courier New"><b>$ bosh instances --vitals<br /></b></font></li><li>GET <font color="#0066cc">https://&lt;bosh-vm-public-ip&gt;:25555/info<br /></font></li><li>GET <font color="#0066cc">https://user:password@localhost:25556/deployments</font><br /></li><li>for each deployment: GET <font color="#0066cc">https://user:password@localhost:25556/deployment/&lt;deployment-name&gt;/instances?format=full</font><br /></li><li>create Jobs::VmState and insert it into Job queue<br /></li><li>redirect to GET <font color="#0066cc">/tasks/&lt;task-id&gt;</font><br /></li><li>pick up Jobs::VmState from queue<br /></li><li>SELECT instances for one deployment</li><li>for each instance of a given deployment: concurrent and synchronous execution of <b><font face="Courier New">agent_client.get_state()</font></b></li><li>agent listens for NATs messages <font face="Courier New"><b>get_state</b></font> from director and dispatches it to the corresponding action</li><li>agent collects stats from local VM and sends them back to NATS</li><li>CLI polls the director at regular intervals for task status: GET <font color="#0066cc">/tasks/&lt;task-id&gt;/output?type=event</font></li><li>the director reads the <b><font face="Courier New">event_output</font></b> column value of the record with the matching task-id from the tasks table</li><li>worker writes the agent state and its vitals into the <b><font face="Courier New">result_output</font></b> column of the tasks table</li><li>once the CLI notices that the task is completed after polling, it queries GET<font color="#0066cc"> /tasks/&lt;task-id&gt;/output?type=result</font></li><li>the director reads the <font face="Courier New"><b>result_output</b></font> column value of the record with the matching task-id from the tasks table</li><li>director sends response back to client</li><li>once the task for a deployment is done and the result has been received, it gets displayed to the user</li></ol></div></div></foreignObject><text x="379" y="222" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="476" y="440" width="280" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(484.5,443.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 104px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Bosh managed VM</div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Bosh managed VM</text></switch></g><rect x="630" y="280" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(654.5,296.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="71" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 73px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: center"><span>NATS</span></div><div style="text-align: center"><span>message bus</span></div></div></div></foreignObject><text x="36" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="628" y="463" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(672.5,486.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="31" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 33px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Agent</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Agent</text></switch></g><path d="M 618.86 92.14 L 536.65 90.15" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 531.4 90.03 L 538.49 86.7 L 536.65 90.15 L 538.32 93.7 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(571.5,85.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">8</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">8</text></switch></g><path d="M 688.14 214.29 L 690.08 273.64" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 690.25 278.88 L 686.52 272 L 690.08 273.64 L 693.52 271.77 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(685.5,241.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="6" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">9</div></div></foreignObject><text x="3" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">9</text></switch></g><path d="M 688.14 462.86 L 690.17 346.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 690.27 341.12 L 693.64 348.18 L 690.17 346.37 L 686.64 348.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(670.5,395.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">10 + 11</div></div></foreignObject><text x="18" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">10 + 11</text></switch></g><path d="M 121.71 250.71 L 288.63 249.06" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 293.88 249.01 L 286.92 252.58 L 288.63 249.06 L 286.85 245.58 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(201.5,243.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">12</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">12</text></switch></g><path d="M 620.29 139.29 L 535.89 104.71" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 531.03 102.72 L 538.84 102.13 L 535.89 104.71 L 536.18 108.61 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(568.5,114.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">14</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">14</text></switch></g><path d="M 120 265 L 289.63 263.07" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 294.88 263.01 L 287.92 266.59 L 289.63 263.07 L 287.84 259.59 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(201.5,258.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">15</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">15</text></switch></g><path d="M 293.86 278.57 L 128.08 279.95" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 122.83 279.99 L 129.8 276.43 L 128.08 279.95 L 129.86 283.43 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(200.5,273.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">17</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">17</text></switch></g><path d="M 430.29 169.29 L 466.38 122.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 469.6 118.74 L 468.06 126.41 L 466.38 122.88 L 462.54 122.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(443.5,137.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">16</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">16</text></switch></g><path d="M 82.43 180 L 81.77 106.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 81.72 101.12 L 85.29 108.09 L 81.77 106.37 L 78.29 108.15 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(75.5,134.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">18</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">18</text></switch></g><path d="M 429.57 142.86 L 466.4 95.04" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 469.6 90.89 L 468.1 98.57 L 466.4 95.04 L 462.56 94.3 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(443.5,110.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">13</div></div></foreignObject><text x="6" y="11" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">13</text></switch></g><ellipse cx="61" cy="23" rx="7.500000000000001" ry="7.500000000000001" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 61 30 L 61 55 M 61 35 L 46 35 M 61 35 L 76 35 M 61 55 L 46 75 M 61 55 L 76 75" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(48.5,82.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="25" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">User</div></div></foreignObject><text x="13" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">User</text></switch></g></g></svg>